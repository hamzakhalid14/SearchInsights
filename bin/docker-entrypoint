#!/bin/bash -e

echo "Starting Rails application..."

# If running the rails server then try to prepare database
if [ "${1}" == "./bin/rails" ] && [ "${2}" == "server" ]; then
  echo "Setting up database..."
  ./bin/rails db:create 2>/dev/null || true
  ./bin/rails db:migrate 2>/dev/null || true
  echo "Database setup completed"
fi

exec "${@}"
